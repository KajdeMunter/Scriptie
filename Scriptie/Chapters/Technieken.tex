\chapter{Technieken}

\label{Chapter3}

Deze paragraaf gaat over de deelvraag \enquote{\deeltechnieken}.

\section{ISO 25010}

ISO-norm 25010 \parencite{ISO25010} is de opvolger van ISO-9126 en beschrijft software kwaliteitskenmerken in acht categorieën. Een categorie hiervan is onderhoudbaarheid. Elke categorie heeft een aantal subcategorieën, bij onderhoudbaarheid zijn dat:

\textbf{Modulariteit:} De mate waarin een systeem of computerprogramma opgebouwd is in losstaande componenten zodat wijzigingen van een component minimale impact heeft op andere componenten.

\textbf{Herbruikbaarheid:} De mate waarin een bestaand onderdeel gebruikt kan worden in meer dan één systeem of bij het bouwen van een nieuw onderdeel.

\textbf{Analyseerbaarheid:} De mate waarin het mogelijk is om effectief en efficiënt de impact, van een geplande verandering van één of meer onderdelen, op een product of systeem te beoordelen, om afwijkingen en/of foutoorzaken van een product vast te stellen of om onderdelen te identificeren die gewijzigd moeten worden.

\textbf{Wijzigbaarheid:} De mate waarin een product of systeem effectief en efficiënt gewijzigd kan worden zonder fouten of kwaliteitsvermindering tot gevolg.

\textbf{Testbaarheid:} De mate waarin effectief en efficiënt testcriteria vastgesteld kunnen worden voor een systeem, product of component en waarin tests uitgevoerd kunnen worden om vast te stellen of aan die criteria is voldaan.
\\\\
\textcolor{red}{TODO: Dit is rechtstreeks gekopieerd uit de wikipedia pagina, kan dat...?} % TODO: Vraag

Om de applicatie \enquote{onderhoudbaar} te noemen moeten alle subcategorieën voldoende worden vervuld. Er moet een analyse worden uitgevoerd per subcategorie over eventuele tekortkomingen.


\section{De Twelve-Factor App}

A. Wiggins \parencite{12Factor} heeft een methodologie opgezet om moderne, schaalbare en onderhoudbare web-applicaties te bouwen. De methodologie past goed bij de probleemstelling, het minimaliseren van de kosten en tijd die het kost om nieuwe ontwikkelaars aan het project te laten werken en de gemakkelijkheid van het schalen. Ook zorgt het voor structural scalability, draagbaarheid tussen uitvoeringsomgevingen, de mogelijkheid om te deployen op moderne cloud platformen en een minimale divergentie tussen development en productie waardoor CD gemakkelijk wordt om te implementeren.

De methodologie heeft 12 factoren (best-practices) die voor deze eigenschappen zorgen. Deze methodologie wordt vaak aangeraden door professionals, en is ook een methodologie die Developers.nl graag terug ziet in haar applicaties. Kritiek op de 12-factor app gaat voornamelijk over het feit dat het gelimiteerd is tot Heroku \parencite{AdaptingTwelveFactor}. Vijf jaar nadat Wiggins de 12-Factor App heeft opgesteld is K. Hoffman aan de slag gegaan met een boek genaamd \enquote{Beyond the 12-Factor App} \parencite{Beyond12Factor}. Dit boek heeft als doel om de 12 factoren concreter te definiëren en voegt daarnaast nog 3 extra factoren toe om applicaties in de cloud niet alleen te laten functioneren maar ook te laten gedijen. Hierdoor is de methodologie ook niet meer persé gericht op Heroku. Deze factoren zijn telemetry, security, en het concept \enquote{API first}. Eigenlijk is een betere benaming voor dit onderzoek dus de \enquote{Fifteen-Factor App}. In bijlage \ref{TabelFactors} is een gevolg samen met een uitleg bij elke factor geplaatst. Zodra een factor te maken heeft met onderhoudbaarheid is er een subcategorie van ISO 25010 onderhoudbaarheid bij geplaatst. Alle 15 factoren zullen worden meegenomen bij het behandelen van de deelvragen.

\section{Schaalbaarheids-controle}

In het onderzoek van Weinstock en Goodenough \parencite{OnSystemScalability} zijn een aantal manieren genoemd om de schaalbaarheid van een systeem te controleren.

\subsection{Knelpunten}
Deze knelpunten hebben vooral te maken de eerste betekenis van Weinstock en Goodenough. Er moet gecontroleerd worden op de toenemende administratieve werkdruk, de \enquote{hard-coded} limieten op capaciteit, de user-interface en de complexiteitsgraad van algoritmen.

\subsection{Onthullen van schaalbaarheids-aannames}
Dit gaat over het onderzoeken hoe de uitbreiding van een systeem nieuwe problemen kan onthullen. Zodra een systeem zich uitbreidt is er een grotere kans op errors in de systeemconfiguratie, \enquote{zeldzame} errors komen vaker voor, is het belangrijk dat een probleem in het systeem gelokaliseerd blijft, en kan het een stuk complexer en lastiger worden om het systeem te begrijpen.

\subsection{Schaalstrategieën}
Hier wordt bekeken wat voor verschillende tekortkomingen een schaalstrategie heeft. Zodra een systeem voor een lange termijn leeft kan het zo zijn dat het systeem anders wordt gebruikt, hier moet de strategie op voorbereid zijn. Een strategie moet moet niet te afhankelijk zijn van het feit dat gebruikers weten hoe het systeem wordt geïmplementeerd. Ook moet de strategie voorbereid zijn op de vooruitgang van hardware.

\subsection{Methoden voor schaalbaarheidsborging}
In het onderzoek vertellen Weinstock en Goodenough dat niet echt mogelijk is om te testen of een systeem schaalbaar is. Wel zijn er methoden om de schaalbaarheid te waarborgen, zoals:
\begin{itemize}
	\item Onderzoek de \enquote{performance curves} en karakteriseer deze met een Big O notatie.
	\item Identificeer mechanismen om knelpunten aan het licht brengen of waar aannames van het schaalbaarheids- ontwerp beginnen te worden geschonden.
	\item Voer een SWOT analyse uit op de schaalbaarheids-strategie.
	\begin{itemize}
		\item \textbf{S}trengths (de soorten groei waar de strategie voor ontworpen is)
		\item \textbf{W}eaknesses (de soorten groei waar de strategie niet voor ontworpen is)
		\item \textbf{O}pportunities (mogelijke veranderingen in werklast of technologie die de strategie goed zou kunnen benutten)
		\item \textbf{T}hreats (mogelijke veranderingen in de werklast of technologie die de strategie in twijfel zouden kunnen trekken)
	\end{itemize}
\end{itemize}

\section{Cloud providers}

Momenteel worden de applicaties binnen Developers.nl gehost op een simpele, traditionele server van TransIP. Een overweging om te maken is of dit niet beter naar een cloud service provider kan worden verplaatst, aangezien dit mogelijk de onderhoudbaarheidslast verminderd. L. Wang \textit{et al.} \parencite{CloudPerspective} definiëren cloud computing als \enquote{A computing Cloud is a set of network enabled services, providing scalable, QoS guaranteed, normally personalized, inexpensive computing infrastructures on demand, which could be accessed in a simple and pervasive way}. Volgens \parencite{CloudPlatformsIntroduction} zijn er drie verschillende categorieën van Cloud computing:
\begin{itemize}
	\item Infrastructure as a Service (IaaS): Een virtueel aangeboden infrastructuur van rekenkracht en/of geheugen \parencite{CloudComputingAdvantages}.
	\item Platform as a Service (PaaS): Een aangeboden platform voor ondersteuning van deployment, ontwikkelen en testen van applicaties \parencite{TransformingCloud}.
	\item Software as a Service (SaaS): Een aangeboden (web)applicatie dat direct gebruikt kan worden \parencite{CloudComputingAdvantages}.
\end{itemize}

Om te overwegen of een cloud provider bij de wensen van Developers.nl past worden de voor-en nadelen op een rijtje gezet:

\textbf{Voordelen cloud:} De kosten van cloud hosting zijn flexibel, er wordt alleen betaalt voor wat er daadwerkelijk gebruikt wordt zolang er verstandig gebruik van wordt gemaakt. Dit betekend dat het erg kostenefficiënt is voor Developers.nl aangezien er tijdens de maandelijkse \enquote{Tech Nights} piekmomenten zijn op de website, en er heel weinig verkeer is op het EMS. In verband met de lage hoeveelheid verkeer op het EMS is \enquote{serverless computing} een goede oplossing om kosten te besparen. Een ander voordeel is dat er bijna een ongelimiteerde hoeveelheid opslagruimte beschikbaar is. Aangezien het CMS van de website dubbel functioneert als \enquote{file-server} en er veel foto's worden geüpload is het fijn dat er geen rekening hoeft worden gehouden met de hoeveelheid opslag. Bovendien worden software updates automatisch uitgevoerd, software als K8s kunnen al inbegrepen zijn bij de infrastructuur en het maakt schalen gemakkelijker. Aangezien cloud providers meer middelen voor beveiliging hebben wordt de veiligheid ook een stuk verbeterd.

\textbf{Voordelen traditioneel:} Ook al is cloud hosting meer kostenefficiënt is het toch mogelijk dat een web host goedkoper uitkomt. Zolang er maar geen hoge piekmomenten zijn in het verkeer. Dit is dus niet van toepassing op Developers.nl aangezien de \enquote{Tech Nights} of andere evenementen voor piekmomenten zorgen. \textcolor{red}{TODO: Huidige kosten?} % TODO: huidige kosten

\textbf{Nadelen cloud:} Cloud providers hebben de mogelijkheid voor technische problemen buiten de controle van klanten, waardoor het mogelijk is dat er downtime ontstaat. Ook kan het duurder uitpakken zodra er niet goed word omgegaan met schalen.

\textbf{Nadelen traditioneel:} De mogelijkheid bestaat dat er meer kosten worden gemaakt dan nodig is. Ook is shared-hosting een risico omdat zodra een andere klant veel rekenkracht opeist de kans ontstaat dat de prestaties dalen.\\

Er zijn veel verschillende cloud providers, waarvan de grootste Amazon Web Services (AWS), Microsoft Azure en Google Cloud Platform (GCP) zijn. \textcolor{red}{TODO: kiezen welke} % TODO: Kiezen welke

\section{Infrastructure-as-Code}
De huidige infrastructuur van de Website en het EMS wordt opgebouwd met Ansible. \enquote{Ansible is a radically simple IT automation engine that automates cloud provisioning, configuration management, application deployment, intra-service orchestration, and many other IT needs} \parencite{Ansible}. Dit doet Ansible door middel van een techniek genaamd \enquote{Infrastructure-as-Code}. Zoals de structuur nu is opgebouwd word er voor elke applicatie een apart stuk IaC geschreven. Om modulariteit en herbruikbaarheid van ISO 25010 \parencite{ISO25010} te verbeteren is het mogelijk om één centrale, algemene infrastructuur repository te maken waar installaties (stukken code dus) als Docker of databases en user-management kunnen worden hergebruikt voor meerdere applicaties. Andere IaC tools als Chef, Puppet, of Terraform kunnen ook voor dit doeleinde worden gebruikt, maar aangezien Ansible al gebruikt wordt is het niet efficiënt om dit om te herschrijven naar iets anders.

\section{Policy-as-Code}
Door policies zijn er duidelijke standaarden waaraan moet voldaan. Policies kunnen in meerdere vormen voorkomen \parencite{WhyPaC}, waaronder:
\begin{itemize}
	\item \textbf{Compliance Policies.} Deze policies verzekeren dat nieuwe toevoegingen voldoen aan standaarden als bijvoorbeeld AVG of SOC.
	\item \textbf{Security Policies.} Deze policies verdedigen de integriteit van de infrastructuur door bijvoorbeeld te verzekeren dat bepaalde poorten niet open staan.
	\item \textbf{Operational Excellence.} Deze policies voorkomen uitval of verslechtering van geleverde services, bijvoorbeeld door nieuwe configuratie te valideren.
\end{itemize}

Vóór policy-as-code (PaC) werden deze policies opgeschreven door iemand en handmatig gecontroleerd. De -- nog vrij nieuwe -- techniek PaC richt zich op het automatiseren van dit proces door policies te kunnen definiëren in de vorm van code. Dit zorgt ervoor dat configuratie getest, peer-reviewed, opgeslagen kan worden in versiebeheer, geautomatiseerd en kan worden hergebruikt. Dit sluit goed aan met de huidige Infrastructure-as-Code (IaC) oplossing die Developers.nl gebruikt voor het inrichten van haar servers.

Het automatiseren van deze kwaliteitscontroles verhoogt de onderhoudbaarheid aanzienlijk. Als we uitgaan van de ISO-25010 definitie van onderhoudbaarheid \parencite{ISO25010} zorgt het omzetten van een handmatige naar een geautomatiseerde controle voor betere analyseerbaarheid op veranderingen van de systemen, omdat afwijkingen en/of fouten gemakkelijker worden vastgesteld. Daarnaast zijn policies in principe testcriteria, waardoor als gevolg ook de testbaarheid van de systemen stijgt bij het implementeren van policies as code. Ook zorgen policies voor wijzigbaarheid, aangezien het systeem gewijzigd kan worden zonder fouten of kwaliteitsverminderingen als gevolg omdat het simpelweg niet geïmplementeerd mag worden zodra een wijziging niet aan een policy voldoet. Bovendien zijn security policies handig voor het beschermen van de gevoelige data dat het EMS bevat.

Er zijn twee technieken om PaC te implementeren. HashiCorps \enquote{Sentinel} en \enquote{Open Policy Agent} (OPA). In verband met de reden dat Sentinel closed-source is wordt er gekozen om OPA te gebruiken, dit past beter bij de bedrijfscultuur en slogan van Developers.nl. Ook is Sentinel alleen toepasbaar op hashiCorp producten, waardoor de techniek een stuk beperkter is.

\section{Load scalability}

De definitie van load scalability luidt als volgt: \enquote{Het vermogen van een systeem om elegant te presteren naarmate het aangeboden verkeer toeneemt}. Om dit te kunnen waarborgen zijn twee technieken leidend in de context van Docker, namelijk Docker Swarm of Kubernetes (K8s). Dit zijn zogenaamde \enquote{container orchestration} tools die helpen bij het automatiseren van alle aspecten behorend bij het beheren van containers. Over het algemeen is Swarm een stuk gemakkelijker en minder complex dan K8s. Dit zou betekenen dat als er rekening word gehouden met onderhoudbaarheid, swarm de beste keuze is om te gebruiken. Maar om de grootste hoeveelheid controle over de containers te hebben is K8s de juiste tool. Ook wordt K8s beter ondersteund door cloud providers doordat AWS, GCP, en Azure een speciale service bieden om K8s toe te passen. Dit heeft te maken met het feit dat de community van K8s ook een stuk groter is vergeleken met Swarm. Het is wel mogelijk om Swarm te gebruiken met de cloud services maar het er is geen out-of-the-box service zoals er bij K8s wel is.
 
\section{Conclusie}

Door een systeem te controleren op de ISO-norm 25010, de 15-Factor App en de controle van Weinstock en Goodenough is te concluderen of een systeem schaal-en onderhoudbaar is. Om de kenmerken modulariteit en herbruikbaarheid van ISO 25010 te verbeteren kan er een centrale infrastructuur IaC repository gemaakt worden met Ansible. Om de kenmerken analyseerbaarheid, testbaarheid en wijzigbaarheid te verbeteren kunnen policies worden afgedwongen door middel van PaC.