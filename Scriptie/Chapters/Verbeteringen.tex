\chapter{Verbeteringen}

\label{Chapter5}

Dit hoofdstuk gaat over de deelvraag \enquote{\deelverbetering}

\section{One codebase, One application}
One codebase, One application is Factor 1 van de 15-Factor App en zorgt voor herbruikbaarheid van ISO 25010. De huidige infrastructuur van de Website en het EMS wordt opgebouwd met Ansible. \enquote{Ansible is a radically simple IT automation engine that automates cloud provisioning, configuration management, application deployment, intra-service orchestration, and many other IT needs} \parencite{Ansible}. Kort gezegd is Ansible een Configuration Management (CM) tool.

Zoals de structuur nu is opgebouwd word er voor elke applicatie een apart stuk IaC geschreven. Om \textbf{modulariteit} en \textbf{herbruikbaarheid} van ISO 25010 \parencite{ISO25010} te verbeteren is het mogelijk om één centrale, algemene infrastructuur repository te maken waar installaties (stukken code dus) als Docker of databases en user-management kunnen worden hergebruikt voor meerdere applicaties. 

Andere IaC tools als Chef, Puppet, of Terraform kunnen ook voor dit doeleinde worden gebruikt, maar aangezien Ansible al gebruikt wordt is het niet efficiënt om dit om te herschrijven naar iets anders. \textcolor{red}{TODO: Terraform samen met Ansible?} % TODO: Terraform samen met ansible?

\section{Policy-as-Code}
Er zijn twee technieken om PaC te implementeren. HashiCorps \enquote{Sentinel} en \enquote{Open Policy Agent} (OPA). In verband met de reden dat Sentinel closed-source is, is er gekozen om OPA te gebruiken, dit past beter bij de bedrijfscultuur, slogan en budgetwensen van Developers.nl. Ook is Sentinel alleen toepasbaar op hashiCorp producten, waardoor de techniek een stuk beperkter is.

\section{Container Orchestration}
Er zijn twee technieken voor container orchestration leidend in de context van Docker, namelijk Docker Swarm of Kubernetes (K8s). Over het algemeen is Swarm een stuk gemakkelijker en minder complex dan K8s. Dit zou betekenen dat als er rekening word gehouden met onderhoudbaarheid, swarm de beste keuze is om te gebruiken. Maar om de grootste hoeveelheid controle over de containers te hebben is K8s de juiste tool. Ook wordt K8s beter ondersteund door cloud providers doordat AWS, GCP, en Azure een speciale service bieden om K8s toe te passen. Dit heeft te maken met het feit dat de community van K8s ook een stuk groter is vergeleken met Swarm. Het is wel mogelijk om Swarm te gebruiken met de cloud services maar het er is geen out-of-the-box service zoals er bij K8s wel is. Als er gekeken wordt naar de wensen van Developers.nl en de scope van dit onderzoek is Swarm de meest passende keuze. Aangezien de meeste prioriteit qua schalen niet specifiek naar het automatiseren en managen van hoge hoeveelheden verkeer gaat maar naar het draaien van meerderen omgevingen naast elkaar om zo verschillende features apart te deployen, of A/B te testen.

\section{Opschonen Docker volumes en images}
De images en volumes moeten automatisch worden opgeschoond.

\section{Telemetry}
Telemetry is Factor 14 van de 15-Factor app. \parencite{Beyond12Factor} noemt drie verschillende categorieën van data om te monitoren in een applicatie:
\begin{itemize}
	\item Application performance monitoring (APM)
	\item Domain-specific telemetry
	\item Health and system logs
\end{itemize}

Om de juiste keuze van monitoring tool te maken is het belangrijk om te specificeren wat Developers.nl graag gemonitord ziet worden. Na een overleg met de Jelle is besloten om minimaal het volgende te monitoren:
\textcolor{red}{TODO: wat te monitoren? en met wat? Prometheus + Grafana?} % TODO: Wat te monitoren?

\section{Codecov}
Om de testbaarheid te verbeteren is Codecov geïmplementeerd.

\section{Conclusie}
Om de kenmerken modulariteit en herbruikbaarheid van ISO 25010 te verbeteren kan er een centrale infrastructuur IaC repository gemaakt worden met Ansible. Om de kenmerken analyseerbaarheid, testbaarheid en wijzigbaarheid te verbeteren kunnen policies worden afgedwongen door middel van PaC.